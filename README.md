# å’–å•¡å»³ç®¡ç†ç³»çµ± (Coffee Shop Management System)

é€™æ˜¯ä¸€å€‹å…¨ç«¯å’–å•¡å»³ç®¡ç†ç³»çµ±ï¼Œå°ˆç‚ºç®¡ç†èœå–®å“é …èˆ‡é¡§å®¢è¨‚å–®è€Œè¨­è¨ˆã€‚æœ¬å°ˆæ¡ˆä½¿ç”¨ç¾ä»£åŒ–å…¨ç«¯æŠ€è¡“å †ç–Šæ§‹å»ºï¼Œä¸¦æ”¯æ´ Docker å®¹å™¨åŒ–å¿«é€Ÿéƒ¨ç½²ã€‚

## ðŸ“– ç›®éŒ„
- [ç³»çµ±æž¶æ§‹](#ç³»çµ±æž¶æ§‹)
- [æ¥­å‹™æµç¨‹åœ–](#æ¥­å‹™æµç¨‹åœ–)
- [å®‰è£èˆ‡å•Ÿå‹•](#å®‰è£èˆ‡å•Ÿå‹•)
- [å°ˆæ¡ˆçµæ§‹](#å°ˆæ¡ˆçµæ§‹)
- [API è¦æ ¼èªªæ˜Ž](#api-è¦æ ¼èªªæ˜Ž)
- [åŠŸèƒ½å±•ç¤º](#åŠŸèƒ½å±•ç¤º)

## ðŸ— ç³»çµ±æž¶æ§‹

æœ¬ç³»çµ±æŽ¡ç”¨å¾®æœå‹™æž¶æ§‹è¨­è¨ˆï¼Œåˆ†ç‚ºå‰ç«¯ã€å¾Œç«¯èˆ‡è³‡æ–™åº«ä¸‰å€‹ç¨ç«‹å®¹å™¨ï¼š

```mermaid
graph TD
    Client[ä½¿ç”¨è€…ç€è¦½å™¨ / React App]

    subgraph "Docker å®¹å™¨ç’°å¢ƒ"
        Frontend[å‰ç«¯æœå‹™ (Vite) :5173]
        Backend[å¾Œç«¯ API (Express) :3000]
        DB[MongoDB è³‡æ–™åº« :27017]
    end

    Client -->|HTTP è«‹æ±‚ / ä»‹é¢äº’å‹•| Frontend
    Client -->|API è«‹æ±‚ (Fetch)| Backend
    Backend -->|Mongoose é€£ç·š| DB
```

- **Frontend**: ä½¿ç”¨ React + Vite æ§‹å»ºï¼Œè² è²¬ UI å±•ç¤ºèˆ‡ä½¿ç”¨è€…äº¤äº’ã€‚
- **Backend**: ä½¿ç”¨ Node.js + Expressï¼Œæä¾› RESTful APIã€‚
- **Database**: ä½¿ç”¨ MongoDBï¼Œé€éŽ Docker Volume ç¢ºä¿è³‡æ–™æŒä¹…åŒ–ã€‚

## ðŸ”„ æ¥­å‹™æµç¨‹åœ–

### è¨‚å–®å»ºç«‹èˆ‡ç‹€æ…‹æ›´æ–°æµç¨‹
```mermaid
sequenceDiagram
    participant User as ä½¿ç”¨è€… (åº—å“¡)
    participant React as å‰ç«¯ (React)
    participant API as å¾Œç«¯ (Express)
    participant DB as è³‡æ–™åº« (MongoDB)

    Note over User, DB: å»ºç«‹è¨‚å–®æµç¨‹

    User->>React: é¸æ“‡é£²å“/ç”œé»žä¸¦é»žæ“Š "å»ºç«‹è¨‚å–®"
    React->>API: POST /api/orders
    API->>DB: å¯«å…¥è¨‚å–®è³‡æ–™
    DB-->>API: å›žå‚³æˆåŠŸ
    API-->>React: å›žå‚³ 201 Created
    React-->>User: é¡¯ç¤ºæˆåŠŸè¨Šæ¯ä¸¦æ›´æ–°åˆ—è¡¨

    Note over User, DB: æ›´æ–°è¨‚å–®ç‹€æ…‹æµç¨‹
    
    User->>React: ä¿®æ”¹ç‹€æ…‹ç‚º "è£½ä½œä¸­" æˆ– "å®Œæˆ"
    React->>API: PUT /api/orders/:id
    API->>DB: æ›´æ–°ç‹€æ…‹æ¬„ä½
    DB-->>API: å›žå‚³æˆåŠŸ
    API-->>React: å›žå‚³ 200 OK
    React-->>User: ä»‹é¢å³æ™‚åæ˜ æœ€æ–°ç‹€æ…‹
```

## ðŸš€ å®‰è£èˆ‡å•Ÿå‹•

### å‰ç½®éœ€æ±‚
- è«‹ç¢ºä¿æ‚¨çš„é›»è…¦å·²å®‰è£ **Docker Desktop**ã€‚

### ä¸€éµå•Ÿå‹•
è«‹åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ (`cafe_manager`) åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š

```bash
docker-compose up -d --build
```

### å­˜å–æœå‹™
å•Ÿå‹•æˆåŠŸå¾Œï¼Œæ‚¨å¯ä»¥é€éŽç€è¦½å™¨è¨ªå•ï¼š
- **å‰ç«¯é é¢ (æ“ä½œä»‹é¢)**: [http://localhost:5173](http://localhost:5173)
- **å¾Œç«¯ API æ¸¬è©¦**: [http://localhost:3000/health](http://localhost:3000/health)

> **æ³¨æ„**: ç‚ºäº†é¿å…èˆ‡æœ¬åœ°ç«¯ MongoDB è¡çªï¼Œæœ¬å°ˆæ¡ˆ Docker ä¸­çš„ MongoDB å°å¤–æ˜ å°„åˆ° **Port 27018**ã€‚

### åœæ­¢æœå‹™
è‹¥è¦çµæŸåŸ·è¡Œä¸¦ç§»é™¤å®¹å™¨ï¼š
```bash
docker-compose down
```

## ðŸ“‚ å°ˆæ¡ˆçµæ§‹
```
cafe_manager/
â”œâ”€â”€ backend/        # Express API ä¼ºæœå™¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/  # å•†æ¥­é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ models/       # è³‡æ–™åº«æ¨¡åž‹ (Schema)
â”‚   â”‚   â”œâ”€â”€ routes/       # API è·¯ç”±å®šç¾©
â”‚   â”‚   â””â”€â”€ server.js     # ä¼ºæœå™¨å…¥å£
â”œâ”€â”€ frontend/       # React å‰ç«¯æ‡‰ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/   # React å…ƒä»¶ (MenuManager, OrderManager)
â”‚   â”‚   â”œâ”€â”€ api.js        # API å‘¼å«å°è£
â”‚   â”‚   â””â”€â”€ App.jsx       # ä¸»ç¨‹å¼å…¥å£
â”œâ”€â”€ docs/           # è©³ç´°æ–‡æª”
â””â”€â”€ docker-compose.yml # å®¹å™¨ç·¨æŽ’è¨­å®š
```

## ðŸ”Œ API è¦æ ¼èªªæ˜Ž

æ‰€æœ‰ API çš„ Base URL ç‚ºï¼š`http://localhost:3000/api`

### å›žæ‡‰æ ¼å¼ (Response Format)
**æˆåŠŸ (Success)**:
```json
{
  "success": true,
  "data": { ... },
  "message": "OK"
}
```

**å¤±æ•— (Error)**:
```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "éŒ¯èª¤è¨Šæ¯æè¿°"
  }
}
```

### 1. èœå–®ç®¡ç† (Menu Items)

| æ–¹æ³• | è·¯å¾‘ | æè¿° | Request Body ç¯„ä¾‹ |
|------|------|------|-------------------|
| **GET** | `/menu-items` | å–å¾—æ‰€æœ‰å“é … | - |
| **POST** | `/menu-items` | æ–°å¢žå“é … | `{"name": "æ‹¿éµ", "price": 120, "category": "coffee"}` |
| **PUT** | `/menu-items/:id` | ä¿®æ”¹å“é … | `{"price": 130}` |
| **DELETE** | `/menu-items/:id` | åˆªé™¤å“é … | - |

### 2. è¨‚å–®ç®¡ç† (Orders)

| æ–¹æ³• | è·¯å¾‘ | æè¿° | Request Body ç¯„ä¾‹ |
|------|------|------|-------------------|
| **GET** | `/orders` | å–å¾—æ‰€æœ‰è¨‚å–® | - |
| **POST** | `/orders` | å»ºç«‹æ–°è¨‚å–® | `{"customerName": "å°æ˜Ž", "items": [...]}` |
| **PUT** | `/orders/:id` | æ›´æ–°ç‹€æ…‹ | `{"status": "done"}` |
| **DELETE** | `/orders/:id` | åˆªé™¤è¨‚å–® | - |

## ðŸŽ¬ åŠŸèƒ½å±•ç¤º

1. **èœå–®ç®¡ç†**: æ”¯æ´å®Œæ•´çš„ CRUDï¼Œå¯è¨­å®šå“é …åç¨±ã€åƒ¹æ ¼ã€é¡žåˆ¥èˆ‡ä¾›æ‡‰ç‹€æ…‹ã€‚
2. **è¨‚å–®å»ºç«‹**: é»žé¸èœå–®å“é …åŠ å…¥è³¼ç‰©è»Šï¼Œè‡ªå‹•è¨ˆç®—ç¸½é‡‘é¡ã€‚
3. **äº¤æ˜“ç´€éŒ„**: å³æ™‚æŸ¥çœ‹æ‰€æœ‰è¨‚å–®ï¼Œä¸¦å¯æ›´æ”¹è£½ä½œç‹€æ…‹ (Pending -> Making -> Done -> Cancelled)ã€‚
